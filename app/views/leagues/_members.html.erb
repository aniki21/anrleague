<div class="table-responsive">
<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th></th>
      <th></th|>
    </tr>
  </thead>
  <tbody>
    <% members.each do |member| %>
      <% role = member.owner? ? "Owner" : (member.officer ? "Officer" : "Member") %>
      <tr class="<%= league_role_row_style(role) %>">
        <td>
          <% if member.approved? %>
            <%= link_to member.display_name, show_profile_path(member.user_id,member.user.slug) %>
            <%= league_member(@league,member.user) %>
          <% else %>
            <%= member.invitation_token %>
          <% end %>
        </td>
        <td>
          <% if member.invited? %>
            <em>Invitation pending</em>
          <% elsif member.requested? %>
            <em>Request pending</em>
          <% end %>
        </td>
        <td class="text-right">
          <% unless member.user == current_user %>
            <%= link_to "Accept", approve_league_join_path(@league.id,member.id), class: "btn btn-success btn-xs" if member.may_approve? %>
            <%= link_to "Promote", league_promote_member_path(@league.id,member.id), class: "btn btn-default btn-xs" if member.may_promote? %>
            <%= link_to "Demote", league_demote_member_path(@league.id,member.id), class: "btn btn-default btn-xs" if member.may_demote? %>
            <%= link_to "Ban", league_ban_member_path(@league.id,member.id), class: "btn btn-danger btn-xs" if member.may_ban? %>
            <%= delete_button league_join_path(@league.id,member.id),"membership","Remove" unless member.approved? %>
          <% else %>
            <em>This is you</em>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<% if @league.liga_users.banned.any? %>
  <p><%= link_to "View #{pluralize @league.liga_users.banned.count,"banned user"}", league_banned_members_path(@league.id) %></p>
<% end %>
